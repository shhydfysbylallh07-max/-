<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÙƒØ§ÙØªÙŠØ±ÙŠØ§ Ø§Ù„Ø®ÙŠØ±</title>

    <!-- Manifest PWA -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#ff6600">

    <!-- Fonts & Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Styles -->
    <style>
        :root {
            --primary-color: #ff6600;
            --secondary-color: #ffcc00;
            --danger-color: #ff4444;
            --warning-color: #ffaa00;
            --gray-100: #f5f5f5;
            --gray-200: #e0e0e0;
            --gray-300: #bdbdbd;
            --gray-500: #757575;
            --gray-600: #616161;
            --radius: 8px;
        }

        body {
            font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background: #fff;
            color: #333;
        }

        header {
            background-color: var(--primary-color);
            color: white;
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        header h1 {
            margin: 0;
            font-size: 1.5rem;
        }

        .hero-section {
            height: 300px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            text-align: center;
            background-size: cover;
            background-position: center;
        }

        .categories-grid, .products-grid, .top-products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 1rem;
            padding: 1rem;
        }

        .category-card, .product-card, .top-product-card {
            background: var(--gray-100);
            border-radius: var(--radius);
            overflow: hidden;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
            display: flex;
            flex-direction: column;
        }

        .category-card:hover, .product-card:hover, .top-product-card:hover {
            transform: translateY(-3px);
            transition: 0.2s;
        }

        .category-card .category-icon, 
        .product-card .product-image, 
        .top-product-card .top-product-image {
            height: 120px;
            background: var(--gray-200);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2rem;
        }

        .product-card img, .top-product-card img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .product-content, .top-product-content {
            padding: 0.5rem 1rem;
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .product-footer, .top-product-content .product-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 0.5rem;
        }

        .add-to-cart-btn {
            background: var(--primary-color);
            border: none;
            color: white;
            padding: 0.5rem;
            border-radius: 4px;
            cursor: pointer;
        }

        .add-to-cart-btn:disabled {
            background: var(--gray-300);
            cursor: not-allowed;
        }

        .cart-floating-btn {
            position: fixed;
            bottom: 1.5rem;
            left: 1.5rem;
            background: var(--primary-color);
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
            z-index: 999;
        }

        .cart-count {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--danger-color);
            color: white;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 0.75rem;
        }

        /* WhatsApp Button */
        .whatsapp-btn {
            position: fixed;
            bottom: 1.5rem;
            right: 1.5rem;
            background: #25d366;
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
            z-index: 999;
        }

    </style>
</head>
<body>

    <header>
        <h1>ÙƒØ§ÙØªÙŠØ±ÙŠØ§ Ø§Ù„Ø®ÙŠØ±</h1>
    </header>

    <!-- Hero Section -->
    <section class="hero-section" id="heroSection">
        <h2 id="heroTitle">Ø§Ø³ØªÙ…ØªØ¹ Ø¨ØªØ¬Ø±Ø¨Ø© Ø¹ØµØ§Ø¦Ø± ÙØ§Ø®Ø±Ø© Ù„Ø§ ØªÙÙ†Ø³Ù‰! ğŸ¹</h2>
        <p id="heroDescription">Ø§ÙƒØªØ´Ù Ø¹Ø§Ù„Ù…Ù‹Ø§ Ù…Ù† Ø§Ù„Ù†ÙƒÙ‡Ø§Øª Ø§Ù„Ø±Ø§Ù‚ÙŠØ© Ù…Ø¹ Ø¹ØµØ§Ø¦Ø±Ù†Ø§ Ø§Ù„Ø·Ø§Ø²Ø¬Ø© Ø§Ù„ÙØ§Ø®Ø±Ø© ÙˆØ³Ù†Ø¯ÙˆØªØ´Ø§ØªÙ†Ø§ Ø§Ù„Ù…Ù…ÙŠØ²Ø©.</p>
    </section>

    <!-- Categories -->
    <section>
        <h3 style="padding: 1rem;">Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª</h3>
        <div id="categoriesGrid" class="categories-grid">
            <!-- ØªØµÙ†ÙŠÙØ§Øª Ø³ÙŠØªÙ… Ø¥Ø¯Ø±Ø§Ø¬Ù‡Ø§ Ù‡Ù†Ø§ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠÙ‹Ø§ -->
        </div>
    </section>

    <!-- Top Products -->
    <section>
        <h3 style="padding: 1rem;">Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ù…ÙŠØ²Ø©</h3>
        <div id="topProductsGrid" class="top-products-grid">
            <!-- Ù…Ù†ØªØ¬Ø§Øª Ù…Ù…ÙŠØ²Ø© Ø³ÙŠØªÙ… Ø¥Ø¯Ø±Ø§Ø¬Ù‡Ø§ Ù‡Ù†Ø§ -->
        </div>
    </section>

    <!-- Products -->
    <section>
        <h3 style="padding: 1rem;">Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h3>
        <div id="productsGrid" class="products-grid">
            <!-- Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø³ÙŠØªÙ… Ø¥Ø¯Ø±Ø§Ø¬Ù‡Ø§ Ù‡Ù†Ø§ -->
        </div>
    </section>

    <!-- Floating Cart Button -->
    <div class="cart-floating-btn" id="cartBtn">
        <i class="fas fa-shopping-cart"></i>
        <div class="cart-count" id="cartCount">0</div>
    </div>

    <!-- Floating WhatsApp Button -->
    <a href="https://wa.me/967730528609" target="_blank" class="whatsapp-btn">
        <i class="fab fa-whatsapp"></i>
    </a>

    <!-- Modals Ø³ÙŠØªÙ… Ø¥Ø¶Ø§ÙØªÙ‡Ø§ ÙÙŠ Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø«Ø§Ù†ÙŠ -->

    <script src="app.js"></script>
</body>
</html>// app.js

// Ø¨ÙŠØ§Ù†Ø§Øª Ø£ÙˆÙ„ÙŠØ© Ù„Ù„Ù…Ù†ØªØ¬Ø§Øª ÙˆØ§Ù„ØªØµÙ†ÙŠÙØ§Øª
let categories = [
    { id: 1, name: "Ø¹ØµØ§Ø¦Ø±", icon: "ğŸ¹" },
    { id: 2, name: "Ø³Ø§Ù†Ø¯ÙˆØªØ´Ø§Øª", icon: "ğŸ¥ª" },
    { id: 3, name: "Ø­Ù„ÙˆÙŠØ§Øª", icon: "ğŸ°" },
];

let products = [
    { id: 1, categoryId: 1, name: "Ø¹ØµÙŠØ± Ø¨Ø±ØªÙ‚Ø§Ù„", price: 2.5, image: "images/juice1.jpg", top: true },
    { id: 2, categoryId: 1, name: "Ø¹ØµÙŠØ± Ù…Ø§Ù†Ø¬Ùˆ", price: 3.0, image: "images/juice2.jpg", top: true },
    { id: 3, categoryId: 2, name: "Ø³Ø§Ù†Ø¯ÙˆØªØ´ Ø¯Ø¬Ø§Ø¬", price: 4.5, image: "images/sandwich1.jpg", top: false },
    { id: 4, categoryId: 3, name: "ÙƒØ¹ÙƒØ© Ø´ÙˆÙƒÙˆÙ„Ø§ØªØ©", price: 2.0, image: "images/cake1.jpg", top: false },
];

// Cart
let cart = JSON.parse(localStorage.getItem("cart")) || [];

// Current User (admin check)
const adminPassword = "1234"; // ÙŠÙ…ÙƒÙ†Ùƒ ØªØºÙŠÙŠØ±Ù‡ Ù„Ø§Ø­Ù‚Ø§Ù‹
let isAdmin = false;

// DOM Elements
const categoriesGrid = document.getElementById("categoriesGrid");
const productsGrid = document.getElementById("productsGrid");
const topProductsGrid = document.getElementById("topProductsGrid");
const cartCount = document.getElementById("cartCount");
const cartBtn = document.getElementById("cartBtn");

// LocalStorage helpers
function saveCart() {
    localStorage.setItem("cart", JSON.stringify(cart));
}

// Render categories
function renderCategories() {
    categoriesGrid.innerHTML = "";
    categories.forEach(cat => {
        const div = document.createElement("div");
        div.classList.add("category-card");
        div.innerHTML = `
            <div class="category-icon">${cat.icon}</div>
            <div class="product-content">
                <h4>${cat.name}</h4>
            </div>
        `;
        div.addEventListener("click", () => filterProductsByCategory(cat.id));
        categoriesGrid.appendChild(div);
    });
}

// Filter products
function filterProductsByCategory(catId) {
    const filtered = products.filter(p => p.categoryId === catId);
    renderProducts(filtered);
}

// Render products
function renderProducts(items = products) {
    productsGrid.innerHTML = "";
    items.forEach(prod => {
        const div = document.createElement("div");
        div.classList.add("product-card");
        div.innerHTML = `
            <div class="product-image">
                <img src="${prod.image}" alt="${prod.name}">
            </div>
            <div class="product-content">
                <h4>${prod.name}</h4>
                <div class="product-footer">
                    <span>${prod.price.toFixed(2)} $</span>
                    <button class="add-to-cart-btn" onclick="addToCart(${prod.id})">Ø£Ø¶Ù Ù„Ù„Ø³Ù„Ø©</button>
                </div>
            </div>
        `;
        productsGrid.appendChild(div);
    });
}

// Render top products
function renderTopProducts() {
    topProductsGrid.innerHTML = "";
    const topItems = products.filter(p => p.top);
    topItems.forEach(prod => {
        const div = document.createElement("div");
        div.classList.add("top-product-card");
        div.innerHTML = `
            <div class="top-product-image">
                <img src="${prod.image}" alt="${prod.name}">
            </div>
            <div class="top-product-content">
                <h4>${prod.name}</h4>
                <div class="product-footer">
                    <span>${prod.price.toFixed(2)} $</span>
                    <button class="add-to-cart-btn" onclick="addToCart(${prod.id})">Ø£Ø¶Ù Ù„Ù„Ø³Ù„Ø©</button>
                </div>
            </div>
        `;
        topProductsGrid.appendChild(div);
    });
}

// Add to cart
function addToCart(prodId) {
    const prod = products.find(p => p.id === prodId);
    const existing = cart.find(c => c.id === prodId);
    if (existing) existing.quantity++;
    else cart.push({ ...prod, quantity: 1 });
    saveCart();
    updateCartCount();
    alert(`${prod.name} ØªÙ…Øª Ø¥Ø¶Ø§ÙØªÙ‡ Ù„Ù„Ø³Ù„Ø©`);
}

// Update cart count
function updateCartCount() {
    const total = cart.reduce((sum, item) => sum + item.quantity, 0);
    cartCount.innerText = total;
}

// Admin Panel
function openAdminPanel() {
    const password = prompt("Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø§Ù„Ù…Ø¯ÙŠØ±:");
    if (password === adminPassword) {
        isAdmin = true;
        showAdminPanel();
    } else {
        alert("ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø®Ø§Ø·Ø¦Ø©");
    }
}

function showAdminPanel() {
    if (!isAdmin) return;
    const panel = document.createElement("div");
    panel.style.position = "fixed";
    panel.style.top = "0";
    panel.style.left = "0";
    panel.style.width = "100%";
    panel.style.height = "100%";
    panel.style.background = "rgba(0,0,0,0.8)";
    panel.style.zIndex = "1000";
    panel.style.overflow = "auto";
    panel.style.padding = "2rem";
    panel.innerHTML = `
        <h2 style="color:white;">Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø¯ÙŠØ±</h2>
        <button id="closeAdminBtn" style="margin-bottom:1rem;">Ø¥ØºÙ„Ø§Ù‚</button>
        <h3 style="color:white;">Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯</h3>
        <input type="text" id="newProdName" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬">
        <input type="number" id="newProdPrice" placeholder="Ø§Ù„Ø³Ø¹Ø±">
        <select id="newProdCategory">
            ${categories.map(c => `<option value="${c.id}">${c.name}</option>`).join("")}
        </select>
        <input type="file" id="newProdImage">
        <label><input type="checkbox" id="newProdTop"> Ù…Ù…ÙŠØ²</label>
        <button id="addProdBtn">Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬</button>
        <hr style="margin:1rem 0;">
        <h3 style="color:white;">Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©</h3>
        <div id="adminProductsList" style="color:white;"></div>
    `;
    document.body.appendChild(panel);

    document.getElementById("closeAdminBtn").addEventListener("click", () => {
        document.body.removeChild(panel);
    });

    document.getElementById("addProdBtn").addEventListener("click", () => {
        const name = document.getElementById("newProdName").value;
        const price = parseFloat(document.getElementById("newProdPrice").value);
        const categoryId = parseInt(document.getElementById("newProdCategory").value);
        const top = document.getElementById("newProdTop").checked;
        const fileInput = document.getElementById("newProdImage");
        if (!name || !price || !fileInput.files[0]) {
            alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ø®ØªÙŠØ§Ø± ØµÙˆØ±Ø©");
            return;
        }
        const reader = new FileReader();
        reader.onload = function(e) {
            const newProd = {
                id: Date.now(),
                name,
                price,
                categoryId,
                top,
                image: e.target.result
            };
            products.push(newProd);
            renderProducts();
            renderTopProducts();
            alert("ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­");
            fileInput.value = "";
            document.getElementById("newProdName").value = "";
            document.getElementById("newProdPrice").value = "";
        };
        reader.readAsDataURL(fileInput.files[0]);
    });

    renderAdminProducts();
}

function renderAdminProducts() {
    const listDiv = document.getElementById("adminProductsList");
    if (!listDiv) return;
    listDiv.innerHTML = "";
    products.forEach(p => {
        const div = document.createElement("div");
        div.style.borderBottom = "1px solid #fff";
        div.style.padding = "0.5rem 0";
        div.innerHTML = `${p.name} - ${p.price.toFixed(2)} $`;
        listDiv.appendChild(div);
    });
}

// Event Listeners
cartBtn.addEventListener("click", () => {
    let message = "Ø·Ù„Ø¨Ùƒ:\n";
    cart.forEach(item => {
        message += `${item.name} Ã— ${item.quantity} = ${(item.price * item.quantity).toFixed(2)} $\n`;
    });
    message += "Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„ØªÙˆØ§ØµÙ„ Ø¹Ø¨Ø± WhatsApp Ù„Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨";
    window.open(`https://wa.me/967730528609?text=${encodeURIComponent(message)}`, "_blank");
});

// Initial Render
renderCategories();
renderProducts();
renderTopProducts();
updateCartCount();

// PWA Service Worker registration
if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('sw.js').then(() => {
        console.log("Service Worker registered");
    });
}
